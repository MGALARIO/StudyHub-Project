<!doctype html>
<html lang="en">
<head>
  <!-- ==========================
    Metadata
  ========================== -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>StudyHub — Your Modern Workspace</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- jQuery + jQuery UI (for draggable/resizable floating video) -->
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
  <link href="https://code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css" rel="stylesheet">

  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>

  <!-- Custom CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- ==========================
    App Shell
  ========================== -->
  <div class="app-shell">

    <!-- ==========================
      Desktop Sidebar (visible on large screens and above)
    ========================== -->
    <aside class="sidebar d-none d-lg-flex flex-column" role="navigation" aria-label="Main sidebar">
      <!-- Brand -->
      <header class="brand mb-3 d-flex align-items-center gap-2">
        <div class="logo">SH</div>
        <div>
          <h1 style="font-size:0.98rem; margin:0;">StudyHub</h1>
          <p class="small-muted" style="font-weight:500; margin:0;">All-in-One Dashboard</p>
        </div>
      </header>

      <!-- Navigation -->
      <nav class="mb-3" aria-label="Main navigation">
        <a href="#" class="nav-link active" data-section="dashboard"><i data-feather="grid"></i> Dashboard</a>
        <a href="#" class="nav-link" data-section="notes"><i data-feather="file-text"></i> Notes & Tasks</a>
        <a href="#" class="nav-link" data-section="meetings"><i data-feather="video"></i> Meetings</a>
        <a href="#" class="nav-link" data-section="music"><i data-feather="play-circle"></i> Live Radio</a>
        <a href="#" class="nav-link" data-section="youtube"><i data-feather="youtube"></i> YouTube</a>
      </nav>

      <!-- Quick Actions -->
      <div class="small-muted">Quick actions</div>
      <div class="quick mb-3">
        <a href="#" class="nav-link" id="startMeetBtn"><i data-feather="zap"></i> Quick Meet</a>
      </div>

      <!-- User Info -->
      <footer class="sidebar-bottom">
        <div style="width:44px;height:44px;border-radius:10px;background:rgba(255,255,255,0.06);display:flex;align-items:center;justify-content:center;">User</div>
        <div>
          <div style="font-weight:600">Student</div>
          <div class="small-muted">Guest account</div>
        </div>
      </footer>
    </aside>

    <!-- ==========================
      Main Content
    ========================== -->
    <main class="main">
      <header class="header">
        <!-- Mobile menu button -->
        <span class="btn btn-light d-lg-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar" aria-controls="mobileSidebar" id="mobileMenuBtn">☰</span>
        <div>
          <h2 class="page-title" id="sectionTitle">Dashboard</h2>
          <p class="page-sub" id="sectionSubtitle">Overview — quick glance</p>
        </div>
      </header>

      <!-- ==========================
        Content Area (Dashboard Sections)
      ========================== -->
      <section id="contentArea">

        <!-- Dashboard -->
        <section class="fade-in" data-section-content="dashboard">
          <div class="grid-3 mb-3">
            <!-- Clock Card -->
            <article class="card-ui text-center">
              <div class="small-muted">Current Time</div>
              <time id="clock" style="font-size:1.5rem;font-weight:700; display:block; margin-top:.35rem"></time>
              <time class="small-muted" id="date" style="display:block; margin-top:.25rem"></time>
            </article>

            <!-- Weather Card -->
            <article class="card-ui text-center">
              <div class="small-muted">Weather</div>
              <div id="weather" style="margin-top:.35rem">Loading…</div>
            </article>

            <!-- Mini Calendar Card -->
            <article class="card-ui text-center">
              <div>
                <div class="small-muted">Mini Calendar</div>
                <div id="miniCalendar" style="margin-top:.5rem"></div>
              </div>             
            </article>          
          </div>

          <!-- Announcements -->
          <article class="card-ui">
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="section-title"><i data-feather="bell"></i> Announcements</div>
                <div id="announcements" class="small-muted">No reminders yet — add tasks in Notes & Tasks.</div>
              </div>
              <div class="controls">
                <button class="btn btn-sm btn-outline-primary" id="viewNotesBtn">View Notes</button>
              </div>
            </div>
          </article>
        </section>

        <!-- Notes & Tasks -->
        <section data-section-content="notes" style="display:none;">
          <div class="card-ui mb-3">
            <!-- Header -->
            <article class="d-flex align-items-center justify-content-between">
              <header>
                <h3 class="section-title"><i data-feather="file-text"></i> Notes & Tasks</h3>
                <h3 class="small-muted">Manage tasks and set alarms</h3>
              </header>
              <div>
                <button class="btn btn-primary" id="toggleNoteFormBtn"><i data-feather="plus"></i> Add Note</button>
              </div>
            </article>

            <!-- Note Form -->
            <div id="noteFormWrap" style="display:none; margin-top:1rem;">
              <form id="noteForm">
                <input type="hidden" id="editingId">
                <div class="mb-2">
                  <label for="titleInput" class="form-label">Title</label>
                  <input type="text" id="titleInput" class="form-control" required>
                </div>
                <div class="mb-2">
                  <label for="contentInput" class="form-label">Content</label>
                  <textarea id="contentInput" class="form-control"></textarea>
                </div>
                <div class="mb-2">
                  <label for="deadlineInput" class="form-label">Deadline</label>
                  <input type="datetime-local" id="deadlineInput" class="form-control">
                </div>
                <div class="form-check mb-2">
                  <input type="checkbox" class="form-check-input" id="alarmToggle">
                  <label class="form-check-label" for="alarmToggle">Enable Alarm</label>
                </div>
                <button type="submit" class="btn btn-success">Save Note</button>
              </form>
              <audio id="alarmAudio" src="alarm.mp3" preload="auto"></audio>
            </div>
            <div id="notesList" style="margin-top:1rem;"></div>
            <div id="missedHistory" style="margin-top:1rem;"></div>
            <button class="btn btn-sm btn-outline-danger" id="clearMissed">Clear Missed Tasks</button>
          </div>
        </section>

        <!-- Meetings Section -->
        <section data-section-content="meetings" style="display:none;">
          <div class="card-ui mb-3">
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="section-title"><i data-feather="video"></i> Meetings</div>
                <div class="small-muted">Start or join study calls</div>
              </div>
            </div>

            <div class="row g-2 mt-2 align-items-center">
              <div class="col-sm-6 col-md-5">
                <input id="roomInput" class="form-control" placeholder="Room name — e.g., StudyHubRoom" />
              </div>
              <div class="col-auto d-flex gap-2">
                <button id="startBtn" class="btn btn-success">🚀 Start</button>
                <button id="stopBtn" class="btn btn-outline-danger" disabled>⛔ Stop</button>
                <button id="openBtn" class="btn btn-outline-primary">↗ Open</button>
                <button id="floatBtn" class="btn btn-outline-warning" disabled>📌 Float</button>
              </div>
            </div>

            <div id="videoContainer" class="mt-3" style="display:none; width:100%; height:620px; background:#000; border-radius:10px;"></div>
          </div>

          <div class="card-ui">
            <h6>Meeting Tips</h6>
            <ul class="small-muted mb-0">
              <li>Choose a unique room name to avoid collisions.</li>
              <li>Allow camera and microphone permissions when prompted.</li>
              <li>Use the floating video to stay connected while browsing other sections.</li>
            </ul>
          </div>
        </section>

        <!-- Floating Jitsi Container -->
        <div id="floatingJitsi" style="display:none; position:fixed; bottom:20px; right:20px; width:320px; height:180px; z-index:1000; background:#000; border-radius:10px; flex-direction:column; box-shadow:0 4px 12px rgba(0,0,0,0.5);">
          <div class="fw-header" style="cursor:move; padding:4px; background:rgba(0,0,0,0.7); color:#fff; display:flex; justify-content:space-between; align-items:center; border-top-left-radius:10px; border-top-right-radius:10px;">
            <span style="font-size:0.85rem;">📹 Live Meeting</span>
            <div>
              <button id="closeJitsiBtn" style="background:none; border:none; color:#fff; font-size:0.85rem; cursor:pointer;">✖</button>
            </div>
          </div>
          <div id="floatingJitsiInner" style="flex:1; width:100%; height:calc(100% - 30px);"></div>
        </div>


        <!-- Radio / Music -->
        <section data-section-content="music" style="display:none;">
          <section class="radio-container card-ui">

            <!-- Equalizer -->
            <div class="floating-equalizer" id="equalizer">
              <div class="eq-bar"></div><div class="eq-bar"></div><div class="eq-bar"></div>
              <div class="eq-bar"></div><div class="eq-bar"></div>
            </div>

            <!-- Header -->
            <div class="header mb-3">
              <h3 class="app-title"><i data-feather="radio"></i> Modern Radio</h3>
              <div class="country-selector mt-2">
                <button class="country-btn active btn btn-sm btn-primary" data-country="PH">🇵🇭 PH</button>
                <button class="country-btn btn btn-sm btn-outline-primary" data-country="US">🇺🇸 US</button>
                <button class="country-btn btn btn-sm btn-outline-primary" data-country="GB">🇬🇧 UK</button>
                <button class="country-btn btn btn-sm btn-outline-primary" data-country="CA">🇨🇦 CA</button>
                <button class="country-btn btn btn-sm btn-outline-primary" data-country="AU">🇦🇺 AU</button>
              </div>
            </div>

            <!-- Status -->
            <div class="status-message" id="statusMessage"></div>

            <!-- Station Info -->
            <div class="station-display my-3">
              <div class="station-avatar" id="stationAvatar">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20 7.24V6a2 2 0 0 0-2-2H6.76l9.72-3.24-.64 1.91L6 5.5V6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8a.76.76 0 0 0-.76-.76zM8 14a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm8-4h-4v-2h4z"/>
                </svg>
              </div>
              <div class="station-name fw-bold" id="stationName">Welcome to Live Radio</div>
              <div class="station-info small-muted" id="stationInfo">Select a country and navigate through stations</div>
            </div>

            <!-- Station Counter -->
            <div class="station-counter small" id="stationCounter">Ready to load stations</div>

            <!-- Audio Controls -->
            <div class="audio-controls mt-3">
              <audio class="main-audio w-100" id="mainAudio" controls preload="none"></audio>
            </div>

            <!-- Navigation -->
            <div class="navigation mt-3">
              <button class="nav-btn btn btn-outline-light me-2" id="prevBtn">⏮ Prev</button>
              <button class="nav-btn btn btn-outline-light" id="nextBtn">Next ⏭</button>
            </div>

            <!-- Loading Indicator -->
            <div class="loading-indicator text-center mt-3" id="loadingIndicator" style="display:none;">
              <div class="spinner-border text-light" role="status"></div>
              <div class="mt-2">Loading stations...</div>
            </div>

          </section>
        </section>

        <!-- YouTube -->
        <section data-section-content="youtube" style="display:none;">
          <div class="card-ui">
            <div class="d-flex align-items-center justify-content-between">
              <div>
                <div class="section-title"><i data-feather="youtube"></i> YouTube</div>
                <div class="small-muted">Search and play videos</div>
              </div>
            </div>

            <div class="input-group mt-2 mb-2">
              <input id="ytSearch" class="form-control" placeholder="Search YouTube...">
              <button id="ytSearchBtn" class="btn btn-primary">Search</button>
            </div>

            <!-- Results grid -->
            <div id="ytResults" class="row g-2"></div>
          </div>
        </section>

      </section>
    </main>
  </div>

  <!-- ==========================
    Mobile Sidebar / Offcanvas (visible on mobile only)
  ========================== -->
  <aside class="mobile-sidebar mobile-sidebar-start offcanvas d-lg-none" tabindex="-1" id="mobileSidebar" aria-label="Mobile sidebar">
    <!-- Brand -->
    <div class="mobile-brand mb-4">
      <div class="logo">SH</div>
      <div class="brand-text">StudyHub</div>
    </div>

    <!-- Navigation -->
    <nav aria-label="Mobile navigation" class="offcanvas-body">
      <a href="#" data-section="dashboard">Dashboard</a>
      <a href="#" data-section="notes">Notes & Tasks</a>
      <a href="#" data-section="meetings">Meetings</a>
      <a href="#" data-section="music">Live Radio</a>
      <a href="#" data-section="youtube">YouTube</a>
    </nav>

    <!-- User Info -->
    <footer class="mobile-sidebar-user mt-auto d-flex align-items-center gap-2 pt-3">
      <div class="user-avatar">User</div>
      <div class="user-text">
        <div class="fw-bold">Student</div>
        <div class="small-muted">Guest account</div>
      </div>
    </footer>
  </aside>

  <!-- Mobile Overlay -->
  <div class="mobile-overlay" id="mobileOverlay"></div>

  <!-- ==========================
    FLOATING VIDEO OVERLAY (UI only, iframe stays in videoContainer)
  ========================== -->
  <div id="floatingVideo" style="display:none; position:fixed; bottom:20px; right:20px; width:320px; height:180px; z-index:10000; background:rgba(0,0,0,0.9); border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.5); flex-direction:column; pointer-events:none;">
    <div class="fv-header" style="cursor:move; padding:6px 10px; background:rgba(0,0,0,0.95); color:#fff; display:flex; justify-content:space-between; align-items:center; border-top-left-radius:10px; border-top-right-radius:10px; pointer-events:auto;">
      <span style="font-size:0.85rem; font-weight:600;">📹 Floating Meeting</span>
      <div style="display:flex; gap:8px;">
        <button id="expandFloating" title="Expand to Meetings" style="background:none; border:none; color:#fff; font-size:1rem; cursor:pointer; padding:0 4px;">🔼</button>
        <button id="closeFloating" title="Close Meeting" style="background:none; border:none; color:#fff; font-size:1rem; cursor:pointer; padding:0 4px;">❌</button>
      </div>
    </div>
  </div>

  <!-- Feather Icons Init -->
  <script>
    if (window.feather) feather.replace();
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Custom JS -->
  <script src="script.js"></script>
</body>
</html>